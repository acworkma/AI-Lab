{
  "$schema": "https://json-schema.org/draft-07/schema#",
  "title": "Core Infrastructure Deployment Parameters",
  "description": "Parameter schema for deploying Azure core infrastructure with vWAN hub, Point-to-Site VPN Gateway, DNS Resolver, and Private DNS Zones",
  "type": "object",
  "required": [
    "location",
    "environment",
    "owner"
  ],
  "properties": {
    "location": {
      "type": "string",
      "description": "Azure region for deployment",
      "default": "eastus2",
      "enum": [
        "eastus",
        "eastus2",
        "westus",
        "westus2",
        "westus3",
        "centralus",
        "northcentralus",
        "southcentralus"
      ]
    },
    "environment": {
      "type": "string",
      "description": "Environment tag for resources",
      "enum": [
        "dev",
        "test",
        "prod"
      ],
      "default": "dev"
    },
    "owner": {
      "type": "string",
      "description": "Owner tag - team or individual responsible for resources",
      "minLength": 1,
      "maxLength": 100
    },
    "resourceGroupName": {
      "type": "string",
      "description": "Name of the resource group (fixed per constitution)",
      "const": "rg-ai-core"
    },
    "vwanName": {
      "type": "string",
      "description": "Name of the Virtual WAN",
      "default": "vwan-ai-hub",
      "pattern": "^[a-z0-9-]{3,64}$"
    },
    "vhubName": {
      "type": "string",
      "description": "Name of the Virtual Hub",
      "default": "hub-ai-eastus2",
      "pattern": "^[a-z0-9-]{3,64}$"
    },
    "vhubAddressPrefix": {
      "type": "string",
      "description": "Address space for Virtual Hub (CIDR notation)",
      "default": "10.0.0.0/16",
      "pattern": "^([0-9]{1,3}\\.){3}[0-9]{1,3}/[0-9]{1,2}$"
    },
    "vpnGatewayName": {
      "type": "string",
      "description": "Name of the site-to-site VPN Gateway for Global Secure Access",
      "default": "vpngw-ai-hub",
      "pattern": "^[a-z0-9-]{3,64}$"
    },
    "vpnGatewayScaleUnit": {
      "type": "integer",
      "description": "VPN Gateway scale units (1 unit = 500 Mbps, required for Global Secure Access)",
      "default": 1,
      "minimum": 1,
      "maximum": 20
    },
    "enableBgp": {
      "type": "boolean",
      "description": "Enable BGP for VPN Gateway (required for Global Secure Access dynamic routing)",
      "default": true
    },
    "bgpAsn": {
      "type": "integer",
      "description": "BGP ASN for VPN Gateway (default Azure ASN)",
      "default": 65515,
      "minimum": 64512,
      "maximum": 65534
    },
    "deployedBy": {
      "type": "string",
      "description": "Tag indicating how deployment was triggered",
      "enum": [
        "manual",
        "automation"
      ],
      "default": "manual"
    },
    "tags": {
      "type": "object",
      "description": "Additional custom tags (environment, purpose, owner are added automatically)",
      "additionalProperties": {
        "type": "string"
      }
    },
    "sharedVnetName": {
      "type": "string",
      "description": "Name of the shared services VNet",
      "default": "vnet-ai-shared",
      "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]{1,62}[a-zA-Z0-9]$"
    },
    "sharedVnetAddressPrefix": {
      "type": "string",
      "description": "Shared services VNet address prefix in CIDR notation",
      "default": "10.1.0.0/24",
      "pattern": "^([0-9]{1,3}\\.){3}[0-9]{1,3}/[0-9]{1,2}$"
    },
    "dnsResolverName": {
      "type": "string",
      "description": "Name of the DNS Private Resolver",
      "default": "dnsr-ai-shared",
      "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]{1,62}[a-zA-Z0-9]$"
    },
    "dnsInboundSubnetPrefix": {
      "type": "string",
      "description": "DNS resolver inbound subnet CIDR (must be within shared VNet address space)",
      "default": "10.1.0.64/27",
      "pattern": "^([0-9]{1,3}\\.){3}[0-9]{1,3}/[0-9]{1,2}$"
    }
  },
  "additionalProperties": false
}
